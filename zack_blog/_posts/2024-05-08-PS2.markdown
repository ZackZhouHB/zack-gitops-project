---
layout: post
title:  " PostgreSQL: Replication & Failover "
date:   2024-05-08 11:15:29 +1100
categories: jekyll Cat2
---

<b> The Replication</b>

Last post I started hands on session with PostgreSQL installation on both docker and docker compose, explored important PostgreSQL configuration and was able to mount persistent volumes and config files to customize PostgreSQL. 

In this post I will setup a second PostgreSQL instance to setup a primaty and standby replication for PostgreSQL HA, by using some pg tools, last we will test failover by shut down primary and promot standby instance. 

By achieving this, steps can be followed by:  

- Get Primary PostgreSQL up and running

- Setup docker network and Create Replication User

- Enable Write-Ahead Log, archive and Replication

- Start standby instance and validate replication

- Test Failover

<b> Preparation</b>

To enable the replication for PostgreSQL, there are a few preparation steps need to be done. 

First we need to prepare the unique prisistent data volume and config files for each PostgreSQL instance, then create docker network so the containers can communicate with primary and standby instances, then we need a Postgres user to replicate data in between, 

<b> Conclusion</b>

Now we are able to run a PostgreSQL primary and standby instances to test replication and failover, in the next blog I will discover how to run PostgreSQL on kubernetes with both Helm and operater, then validate scale up and down, backup using cronjob and etc.



